import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{$ as p,a as f,a0 as g,a1 as N,a2 as C}from"./index.BGd5Ky0j.js";import{a as r}from"./debug.DRjTZKen.js";import{r as u}from"./index.BqJQxrZM.js";import{M as b,B as y,C as S,D as h,w as v,E as w,n as k,F as A}from"./modal.Bkg2kDE0.js";import{p as M,c as j}from"./prompt.lRC3jknX.js";import{P as D}from"./PricingPlansModal.CsfcNgzq.js";import{i as I}from"./isEmpty.yPRxPQfS.js";import"./_commonjsHelpers.CqkleIqs.js";import"./client.VHhTgbqr.js";import"./PricingTable.C-drzN-W.js";/* empty css                              */function O({user:n,onManage:a,onSubscribe:o,onClose:d}){const[s,i]=u.useState(!1);function c(){s||d()}async function t(l){i(!0),await S(l),i(!1),j({title:"Account deleted",text:"Your account is successfully deleted. You will now be signed out.",onOk:h,onCancel:h,classCancel:"hidden"})}async function m(){M({title:"Delete account",text:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:y(n)?"Are you sure you want to delete your account and all your private documents?":"Are you sure you want to delete your account?"}),e.jsxs("p",{children:["If so, please enter your user id ",e.jsx("b",{children:n.id}),' below and click "Delete account".']})]}),value:"",textOk:"Delete account",classOk:"danger",onOk:async l=>{const x=l.trim();x===n.id?await t(x):j({title:"Wrong id",text:"You did not enter your user id correctly. Your account will not be deleted.",classCancel:"hidden"})}})}return e.jsx(b,{onRequestClose:c,className:"modal-account-details-foreground",children:e.jsxs("div",{className:"modal modal-account-details",children:[e.jsx("h1",{children:"Account details"}),e.jsx("table",{className:"properties",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("td",{children:n.fullName})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Email"}),e.jsx("td",{children:n.email})]}),e.jsxs("tr",{children:[e.jsx("th",{children:"Subscription"}),e.jsx("td",{children:n.subscriptions.length===0?e.jsxs(e.Fragment,{children:["None"," ",e.jsx("button",{type:"button",className:"modal-button",onClick:()=>o(),disabled:s,children:"Subscribe"})]}):n.subscriptions.map(l=>e.jsxs("div",{className:"subscription",children:[l.plan.name," ",l.active?e.jsx("span",{className:"active",children:"(active)"}):e.jsx("span",{className:"cancelled",children:"(cancelled)"})]}))})]})]})}),e.jsxs("div",{className:"modal-action-menu",children:[e.jsx("button",{className:"modal-button primary",title:"Manage account at Memberful",onClick:()=>a(),disabled:s,children:"Manage account"}),e.jsx("button",{className:"modal-button danger",onClick:()=>m(),disabled:s,children:s?"Deleting account...":"Delete account"}),e.jsx("div",{className:"modal-action-space"}),e.jsx("button",{className:"modal-button",onClick:()=>c(),disabled:s,children:"Close"})]}),s&&e.jsx("div",{className:"deleting-account",children:"Deleting account..."})]})})}function P({signUp:n,signIn:a,onClose:o}){return e.jsx(b,{onRequestClose:o,className:"modal-sign-in-foreground",children:e.jsxs("div",{className:"modal modal-sign-in",children:[e.jsx("h1",{children:"Sign In"}),e.jsxs("div",{className:"sign-in-actions",children:[e.jsxs("div",{className:"sign-in-description",children:["If you ",e.jsx("b",{children:"don't"})," have an account:"]}),e.jsx("button",{className:"modal-button primary sign-up",onClick:()=>n(),children:"Sign up for free"}),e.jsxs("div",{className:"sign-in-description",children:["If you ",e.jsx("b",{children:"do"})," have an account:"]}),e.jsx("button",{className:"modal-button primary sign-in",onClick:()=>a(),children:"Sign in"})]}),e.jsx("div",{className:"modal-action-menu",children:e.jsx("button",{className:"modal-button",onClick:()=>o(),children:"Cancel"})})]})})}function H(){const[n,a]=u.useState(!1),[o,d]=u.useState(!1),[s,i]=u.useState(!1),c=v(),{user:t}=c;return e.jsxs(e.Fragment,{children:[t?e.jsxs("div",{tabIndex:-1,className:"static-dropdown-button account-menu",children:[e.jsxs("button",{className:"button static-dropdown-description username",title:`You are logged in as ${t.fullName} (${t.email})`,children:[e.jsx(r,{icon:p},"user")," ",t.fullName," ",e.jsx(r,{icon:f})]}),e.jsxs("div",{className:"static-dropdown-menu",children:[e.jsxs("button",{className:"button dropdown-menu-button",onClick:()=>a(!0),title:"Manage your account, subscription, and payment information",children:[e.jsx(r,{icon:g,fixedWidth:!0})," Account"]}),(I(t.subscriptions)||t.subscriptions.some(m=>!m.active))&&e.jsxs("button",{className:"button dropdown-menu-button",onClick:()=>i(!0),title:"Subscribe to JSON Editor Online (removes ads)",children:[e.jsx(r,{icon:N,fixedWidth:!0})," Subscribe"]}),e.jsxs("button",{className:"button dropdown-menu-button",onClick:()=>h(),title:"Sign out",children:[e.jsx(r,{icon:C,fixedWidth:!0})," Sign Out"]})]})]}):e.jsx("div",{className:"account-menu",children:e.jsx("button",{className:"button sign-in",onClick:()=>d(!0),children:"Sign in"})}),n&&c.user&&e.jsx(O,{user:c.user,onManage:w,onSubscribe:()=>i(!0),onClose:()=>a(!1)}),o&&e.jsx(P,{signUp:A,signIn:k,onClose:()=>d(!1)}),s&&e.jsx(D,{onClose:()=>i(!1)})]})}export{H as default};
