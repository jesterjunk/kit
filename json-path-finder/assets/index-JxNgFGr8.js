var C=Object.defineProperty;var L=(r,e,t)=>e in r?C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var m=(r,e,t)=>(L(r,typeof e!="symbol"?e+"":e,t),t),D=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var l=(r,e,t)=>(D(r,e,"read from private field"),t?t.call(r):e.get(r)),g=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)};(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();var d;const u=class u{constructor(e){g(this,d,!1);m(this,"internalState");m(this,"subscribers");this.internalState={...e},this.subscribers={},Object.keys(e).forEach(t=>{this.subscribers[t]=[]})}static logDebug(...e){console.log(...e),console.trace()}get(e){const t=this.internalState[e];return l(this,d)&&u.logDebug("State.get",{prop:e,value:t}),t}set(e,t){var n;const o=this.get(e);l(this,d)&&u.logDebug("State.set",{prop:e,newValue:t,lastValue:o}),o!==t&&(this.internalState[e]=t,(n=this.subscribers[e])==null||n.forEach(({label:s,callback:i})=>{l(this,d)&&u.logDebug("State: subscriber triggered",{prop:e,label:s,newValue:t,lastValue:o}),i(t,o)}))}subscribe(e,t,o){var n;l(this,d)&&u.logDebug("State.subscribe",{prop:e,label:t,callback:o.toString()}),(n=this.subscribers[e])==null||n.push({label:t,callback:o})}};d=new WeakMap;let p=u;const b={instructions:["Enter your JSON in the editor.","Select an item to view its path.","Replace 'x' with the name of your variable."]},x={isDarkMode:!1,jsonData:b,jsonText:JSON.stringify(b,null,2),path:"",copyButtonDisabled:!1,error:"",selectedNode:null},c=new p(x);function v(r){return r instanceof Error?r.message:String(r)}function j(r,e){let t;return(...o)=>{clearTimeout(t),t=setTimeout(()=>r(...o),e)}}function T(r){return Array.isArray(r)?r.map((e,t)=>[t,e]):Object.entries(r)}class h{constructor(e){m(this,"state");this.state=e}static isLeafNode(e){return e==null||typeof e!="object"}static appendKeyToPath(e,t){return Number.isInteger(e)?`${t}[${e.toString()}]`:/[^A-Za-z0-9_$]/.test(e.toString())?`${t}["${e}"]`:`${t}.${e}`}renderLeafNode({key:e,value:t,path:o}){const n=h.appendKeyToPath(e,o),s=document.createElement("button");s.classList.add("json-reader-tree-property"),s.addEventListener("click",()=>{this.state.set("selectedNode",s),this.state.set("path",n)});const i=document.createElement("span");i.textContent=`${e}:`,s.appendChild(i);const a=document.createElement("span");return a.classList.add("json-reader-tree-property-value"),a.textContent=(t==null?void 0:t.toString())||"null",s.appendChild(a),s}renderParentNode({key:e,value:t,path:o}){const n=h.appendKeyToPath(e,o),s=document.createElement("details"),i=document.createElement("summary");i.classList.add("json-reader-tree-parent"),i.addEventListener("click",()=>{this.state.set("selectedNode",i),this.state.set("path",n)}),s.appendChild(i);const a=document.createElement("span");a.textContent=`${e}:`,i.appendChild(a);const f=this.renderTree(t,{path:n,isSubtree:!0});return s.appendChild(f),s}renderTree(e,{path:t="x",isSubtree:o=!1}={}){const n=T(e),s=document.createElement("div");return o&&s.classList.add("json-reader-tree-subtree"),n.forEach(([i,a])=>{const f=h.isLeafNode(a)?this.renderLeafNode({key:i,value:a,path:t}):this.renderParentNode({key:i,value:a,path:t});s.appendChild(f)}),s}renderReader(e){const t=document.createElement("div");t.classList.add("json-reader-tree");const o=this.renderTree(e);t.appendChild(o);const n=document.getElementById("json-reader");n&&(n.textContent="",n.appendChild(t))}initReader(){this.state.subscribe("jsonText","set json data when json text changes",(e,t)=>{const o=JSON.stringify(JSON.parse(e)),n=JSON.stringify(JSON.parse(t));if(o!==n)try{const s=JSON.parse(e);this.state.set("jsonData",s),this.state.set("error","")}catch(s){this.state.set("error",v(s))}}),this.state.subscribe("jsonData","render reader",e=>{this.renderReader(e)})}initErrorDisplay(){this.state.subscribe("error","render error message",e=>{if(e){const t=document.createElement("div");t.id="json-reader-error";const o=document.createElement("div");o.classList.add("json-reader-error-part"),o.textContent="There seems to be a problem with your JSON. Error message:";const n=document.createElement("div");n.classList.add("json-reader-error-part");const s=document.createElement("span");s.id="json-reader-error-message",s.textContent=e,n.appendChild(s),t.appendChild(o),t.appendChild(n);const i=document.getElementById("json-reader");if(!i)return;i.innerHTML="",i.appendChild(t)}})}init(){this.initReader(),this.initErrorDisplay()}}function B(r){document.querySelectorAll("[data-path]").forEach(e=>{e.addEventListener("click",()=>{var t;r.set("selectedNode",e),r.set("path",((t=e==null?void 0:e.dataset)==null?void 0:t.path)??"Sorry, could not find path")})}),r.subscribe("selectedNode","make selected node have selected class",(e,t)=>{t==null||t.classList.remove("json-reader-tree-property-selected"),e==null||e.classList.add("json-reader-tree-property-selected")})}const O=`html {
    -webkit-filter: invert(0%) brightness(1) saturate(1) hue-rotate(0deg);
    -moz-filter: invert(0%) brightness(1) saturate(1) hue-rotate(0deg);
    -o-filter: invert(0%) brightness(1) saturate(1) hue-rotate(0deg);
    -ms-filter: invert(0%) brightness(1) saturate(1) hue-rotate(0deg);
  }`,k=`html {
    -webkit-filter: invert(85%) brightness(.9) saturate(1.5) hue-rotate(180deg);
    -moz-filter: invert(85%) brightness(.9) saturate(1.5) hue-rotate(180deg);
    -o-filter: invert(85%) brightness(.9) saturate(1.5) hue-rotate(180deg);
    -ms-filter: invert(85%) brightness(.9) saturate(1.5) hue-rotate(180deg);
  }`;function y(r){const e=document.querySelector("head"),t=document.createElement("style");t.appendChild(document.createTextNode(r)),e==null||e.appendChild(t)}function M(r){var o;r.subscribe("isDarkMode","set dark mode and button text",n=>{const s=document.getElementById("dark-mode-button");if(s){if(n){y(k),s.title="Light Mode";return}y(O),s.title="Dark Mode"}});const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e.matches;r.set("isDarkMode",t),(o=document.getElementById("dark-mode-button"))==null||o.addEventListener("click",()=>{const n=r.get("isDarkMode");r.set("isDarkMode",!n)}),e.addEventListener("change",n=>{r.set("isDarkMode",n.matches)})}function N(r){const e=ace.edit("editor");e.setTheme("ace/theme/chrome"),e.getSession().setMode("ace/mode/json"),e.getSession().setTabSize(2),e.$blockScrolling=1/0,e.setShowPrintMargin(!1);const t=j(o=>{r.set("jsonText",o);try{JSON.parse(o)}catch(n){r.set("error",v(n))}},500);e.getSession().on("change",()=>{t(e.getValue())}),r.subscribe("jsonText","set editor value",o=>{const n=e.getCursorPosition();e.setValue(o,1),e.moveCursorToPosition(n)}),e.setValue(r.get("jsonText")),e.moveCursorToPosition({row:0,column:0})}function I(r){const e=document.getElementById("load-sample");if(!e)return;const t=o=>{e.textContent="Failed",setTimeout(()=>{e.textContent=o},3e3)};e.addEventListener("click",async()=>{const o=e.textContent??"Sample";e.textContent="Loading...";try{const n=await fetch("/assets/sample.json");if(!n.ok){t(o);return}const s=await n.text();r.set("jsonText",s),e.textContent=o}catch{t(o)}})}function P(r){var e;(e=document.getElementById("beautify"))==null||e.addEventListener("click",()=>{r.set("jsonText",JSON.stringify(r.get("jsonData"),null,2))})}function w(r){var e;(e=document.getElementById("minify"))==null||e.addEventListener("click",()=>{r.set("jsonText",JSON.stringify(r.get("jsonData")))})}function V(r){r.subscribe("path","render path text in path element",e=>{const t=document.querySelector("#reader-path-bar-input");t&&(t.value=e,r.set("copyButtonDisabled",!1))})}function A(r){const e=document.getElementById("reader-path-bar-copy");e&&(r.subscribe("copyButtonDisabled","disable copy button",t=>{if(t){e.setAttribute("disabled","");return}e.removeAttribute("disabled")}),r.set("copyButtonDisabled",!0),e.addEventListener("click",()=>{navigator.clipboard.writeText(r.get("path")),r.set("copyButtonDisabled",!0),e.textContent="Copied",setTimeout(()=>{r.set("copyButtonDisabled",!1),e.textContent="Copy"},1e3)}))}const J={"1.0.0":1,"2.0.0":2,"2.0.1":3,"2.1.0":4},R="2.1.0",$=J[R],S="lastVersionViewed",q=()=>{const r=localStorage.getItem(S);return localStorage.setItem(S,$.toString()),r};function F(r){function e(){s(),document.body.removeChild(r)}function t(i){i.target===i.currentTarget&&(s(),document.body.removeChild(r))}function o(i){i.key==="Escape"&&(s(),document.body.removeChild(r))}const n=document.querySelectorAll(".close-overlay-button");function s(){n.forEach(i=>{i.removeEventListener("click",e)}),r.removeEventListener("click",t),document.body.removeEventListener("keyup",o)}n.forEach(i=>{i.addEventListener("click",e)}),r.addEventListener("click",t),document.body.addEventListener("keyup",o)}function z(){if(parseInt(q()??"2",10)<2){const e=document.querySelector("#v2-overlay-mask");if(!e)return;F(e),e.style.display="block"}}function E(){document.querySelectorAll(".big-box").forEach(r=>{r.style.height=window.innerHeight-90+"px"})}function K(){E(),addEventListener("resize",()=>{E()})}document.addEventListener("DOMContentLoaded",()=>{new h(c).init(),B(c),N(c),V(c),A(c),M(c),I(c),P(c),w(c),K(),z()});
