import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{R as n}from"./index.BqJQxrZM.js";import{M as a}from"./modal.Bkg2kDE0.js";import{f as i}from"./debug.DRjTZKen.js";import{c as l}from"./client.VHhTgbqr.js";class h extends n.PureComponent{constructor(e){super(e),this.okRef=null,this.modalRef=null,this.handleCancel=this.handleCancel.bind(this),this.handleOk=this.handleOk.bind(this),this.close=this.close.bind(this)}render(){return s.jsx(a,{ref:e=>{this.modalRef=e},onRequestClose:this.handleCancel,children:s.jsxs("div",{className:"modal modal-confirm",children:[s.jsx("h1",{children:this.props.title}),s.jsx("div",{className:"modal-text",children:this.props.text}),s.jsxs("div",{className:"modal-action-menu",children:[s.jsx("button",{className:i("modal-button",this.props.classCancel),onClick:this.handleCancel,children:this.props.textCancel||"Cancel"}),s.jsx("button",{ref:e=>{this.okRef=e},onClick:this.handleOk,className:i("modal-button","primary",this.props.classOk),children:this.props.textOk||"Ok"})]})]})})}componentDidMount(){setTimeout(()=>this.okRef.focus())}handleOk(e){e.preventDefault(),this.close(),this.props.onOk&&this.props.onOk()}handleCancel(){this.close(),this.props.onCancel&&this.props.onCancel()}close(){this.modalRef.close(),this.props.onClose()}}function C(o){const e=document.createElement("div");document.body.appendChild(e);function t(){document.body.removeChild(e)}l.createRoot(e).render(s.jsx(h,{...o,onClose:t}))}class c extends n.PureComponent{constructor(e){super(e),this.state={value:e.value,optionValue:e.optionValue||null,checkboxValue:e.checkboxValue||!1,showValidationResult:!1},this.valueRef=null,this.modalRef=null,this.handleOk=this.handleOk.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleChange=this.handleChange.bind(this),this.handleChangeOption=this.handleChangeOption.bind(this),this.handleChangeCheckbox=this.handleChangeCheckbox.bind(this),this.close=this.close.bind(this)}render(){const e=this.props.validate&&this.state.showValidationResult?this.props.validate(this.state.value):null;return s.jsx(a,{ref:t=>{this.modalRef=t},className:this.props.className,onRequestClose:this.handleCancel,children:s.jsxs("div",{className:"modal modal-prompt",children:[s.jsx("h1",{children:this.props.title}),s.jsx("div",{className:"modal-text",children:this.props.text}),s.jsxs("form",{onSubmit:this.handleOk,children:[s.jsx("input",{ref:t=>{this.valueRef=t},type:"text",className:i("regular",{error:e}),value:this.state.value,onChange:this.handleChange}),this.props.optionOptions&&s.jsxs("div",{className:"options",children:[this.props.optionText&&s.jsxs("div",{children:[this.props.optionText,":"]}),s.jsx("select",{value:this.state.optionValue,title:this.props.optionTitle,onChange:this.handleChangeOption,children:this.props.optionOptions.map(t=>s.jsx("option",{value:t.value,children:t.text},t.value))})]}),this.props.checkboxText&&s.jsxs("label",{title:this.props.checkboxTitle,children:[s.jsx("input",{type:"checkbox",checked:this.state.checkboxValue,onChange:this.handleChangeCheckbox})," ",this.props.checkboxText]})]}),e&&s.jsx("div",{className:"error-message",children:e}),s.jsxs("div",{className:"modal-action-menu",children:[s.jsx("button",{className:i("modal-button",this.props.classCancel),onClick:this.handleCancel,children:this.props.textCancel||"Cancel"}),s.jsx("button",{onClick:this.handleOk,className:i("modal-button","primary",this.props.classOk),children:this.props.textOk||"Ok"})]})]})})}componentDidMount(){setTimeout(()=>this.valueRef.select(),0)}handleOk(e){if(e.preventDefault(),this.props.validate&&this.props.validate(this.state.value)!=null){this.setState({showValidationResult:!0}),this.valueRef.select();return}this.close(),this.props.onOk&&this.props.onOk(this.state.value,this.state.optionValue,this.state.checkboxValue)}handleCancel(){this.close(),this.props.onCancel&&this.props.onCancel()}handleChange(){this.setState({value:this.valueRef.value})}handleChangeOption(e){const t=e.target.value;this.setState({optionValue:t}),this.props.optionChange&&this.props.optionChange(t)}handleChangeCheckbox(e){const t=e.target.checked;this.setState({checkboxValue:t}),this.props.checkboxChange&&this.props.checkboxChange(t)}close(){this.modalRef.close(),this.props.onClose()}}function x(o){const e=document.createElement("div");document.body.appendChild(e);function t(){document.body.removeChild(e)}l.createRoot(e).render(s.jsx(c,{...o,onClose:t}))}export{c as P,C as c,x as p};
