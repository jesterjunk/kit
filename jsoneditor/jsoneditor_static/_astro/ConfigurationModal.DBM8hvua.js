import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{g as f}from"./index.BGd5Ky0j.js";import{f as J,a as b,L as H,c as Ce}from"./debug.DRjTZKen.js";import{r as s}from"./index.BqJQxrZM.js";import{W as c,J as ye}from"./JSONEditorComponent.bUYtOSjE.js";import{D as v,X as K,h as Le,S as g,f as Q,Y as ze,E as ee,Z as we}from"./fontUtils.BV5T5L3M.js";import{P as x}from"./useConfig.Dv4xtEmJ.js";import{t as Ie,M as ke}from"./modal.Bkg2kDE0.js";import"./_commonjsHelpers.CqkleIqs.js";import"./index.B2YNouON.js";import"./floating-ui.dom.BVVWGuUJ.js";import"./isEmpty.yPRxPQfS.js";import"./index.-DrlcFrU.js";import"./json-schema-draft-06.BUXeb-dj.js";import"./preload-helper.CLcXU_4U.js";import"./client.VHhTgbqr.js";const Ee=Ce("jsoneditoronline:ConfigurationModal"),R={text:`{
  "text": "Preview configuration settings",
  "boolean": true,
  "color": "red",
  "unicode": "😀",
  "multiline": "line1,\\nline2,\\nline3",
  "number": 4.0,
  "long": 18800000000000000123
}
`},Pe={json:[{id:1017,name:"Joe",address:{city:"New York",street:"Victor Plains"},scores:[8,7.2,6.7]},{id:1029,name:"Sarah",address:{city:"Manhattan",street:"Skiles Walks"},scores:[6.1,6.2,6]},{id:1022,name:"Mike",address:{city:"South Christy",street:"Norberto Crossing"},scores:[7.1,7.2]}]};function Qe({config:t,onClose:i,onOk:o}){const a=v(),j=v(),S=v(),A=v(),U=v(),y=s.useRef(null),L=s.useRef(null),z=s.useRef(null),[q,D]=s.useState(c.tree),[W,te]=s.useState(t.fontSize),[d,ne]=s.useState(t.indentation==="	"),[l,se]=s.useState(t.indentation==="	"?String(t.tabSize):typeof t.indentation=="number"?String(t.indentation):String(t.indentation.length)),[N,ae]=s.useState(String(t.maxLineLength)),[w,ie]=s.useState(t.escapeControlCharacters),[I,re]=s.useState(t.escapeUnicodeCharacters),[k,oe]=s.useState(t.flattenColumns),[h,le]=s.useState(t.parserId),[ce,de]=s.useState(!1),[E,m]=s.useState(R),_=Number(l),he=d?"	":_,ue=_,Y=Number(N),P={theme:t.theme,themeColor:t.themeColor,fontSize:K(W),indentation:he,tabSize:ue,maxLineLength:Y,escapeControlCharacters:w,escapeUnicodeCharacters:I,flattenColumns:k,parserId:h,queryLanguageId:t.queryLanguageId},r=ce?$(P,l,N):void 0,T=Le(h,Ie(E).text.length);s.useEffect(()=>{L.current&&L.current.select()},[]);function me(n){te(n),z.current&&z.current.style.setProperty("--jse-font-size-mono",Oe(K(n),t.fontSize))}function Z(n,p){const F=V(n,p,t.indentation);m(we(E,T,F))}function u(n){const p=document.activeElement;D(n),m(n==="table"?Pe:R),setTimeout(()=>{p&&p.focus()})}function G(n){u(c.text),ne(n),Z(n,l)}function pe(n){u(c.text),se(n),Z(d,n)}async function xe(n){u(c.text),ae(n);const p=Array(50).fill(0).map((Fe,Ne)=>Ne),F=V(d,l,t.indentation),ge=Number(n),Se=await ze(T.stringify(p)||"",F,ge);m({text:Se})}function je(n){u(c.tree),ie(n)}function fe(n){q==="table"?u(c.tree):m(R),re(n)}function be(n){u(c.table),oe(n)}function M(n){u(c.tree),le(n)}function O(){return de(!0),!$(P,l,N)?(o(P),B(),!0):!1}function X(){B()}function B(){y.current&&y.current.close(),i()}function ve(){Ee("save and reload"),O()&&window.location.reload()}return e.jsx(ke,{ref:y,className:"configuration",onRequestClose:X,children:e.jsxs("div",{className:"modal modal-configuration",children:[e.jsx("h1",{children:"Configuration"}),e.jsxs("div",{className:"columns",children:[e.jsx("div",{className:"column left",children:e.jsxs("form",{onSubmit:O,children:[e.jsx("h2",{children:"Font size"}),e.jsxs("div",{className:"modal-text",children:["Configure the font size, for example ",e.jsx("code",{children:'"14px"'})," (default) or"," ",e.jsx("code",{children:'"12pt"'}),"."]}),e.jsx("table",{children:e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsx("td",{children:"Font size:"}),e.jsx("td",{children:e.jsx("input",{ref:L,type:"text",value:W,onChange:n=>me(n.target.value),className:J("fontSize","regular",{error:r?.fontSize})})})]})})}),r?.fontSize&&e.jsx("div",{className:"error-message",children:r.fontSize}),e.jsx("h2",{children:"Indentation"}),e.jsx("div",{className:"modal-text",children:"Indentation used in text mode and when copying or saving a document."}),e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Type of indentation:"}),e.jsxs("td",{className:"indentation-types",children:[e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"useTab",value:"spaces",checked:!d,onChange:()=>G(!1)})," ","Spaces"]}),e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"useTab",value:"tabs",checked:d,onChange:()=>G(!0)})," ","Tabs"]})]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:d?"Tab size: ":"Number of spaces: "}),e.jsx("td",{children:e.jsx("input",{type:"text",className:J("indentation","regular",{error:r?.indentation}),value:l,onChange:n=>pe(n.target.value)})})]}),r?.indentation&&e.jsx("tr",{className:"error-message",children:e.jsx("td",{colSpan:2,children:r.indentation})}),e.jsxs("tr",{children:[e.jsxs("td",{children:["Max line length:",e.jsx("div",{className:"explanation","data-tooltip-id":a,children:e.jsx(b,{icon:f})}),e.jsx(g,{id:a,children:'Only applicable when using the "Smart Format JSON" button.'})]}),e.jsx("td",{children:e.jsx("input",{type:"text",name:"maxLineLength",className:J("max-line-length","regular",{error:r?.maxLineLength}),value:N,onChange:n=>xe(n.target.value)})})]}),r?.maxLineLength&&e.jsx("tr",{className:"error-message",children:e.jsx("td",{colSpan:2,children:r.maxLineLength})})]})}),e.jsx("h2",{children:"Escape characters"}),e.jsx("table",{children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:w,onChange:n=>je(n.target.checked)})," ","Escape control characters like newline ",e.jsx("code",{children:'"\\n"'})," and tab"," ",e.jsx("code",{children:'"\\t"'})," ",e.jsx("div",{className:"explanation","data-tooltip-id":j,children:e.jsx(b,{icon:f})}),e.jsx(g,{id:j,children:"Escaping control characters is only applicable in tree mode."})]})})}),e.jsx("tr",{children:e.jsx("td",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:I,onChange:n=>fe(n.target.checked)})," ","Escape unicode characters like smilies ","😁"]})})})]})}),e.jsx("h2",{children:"Table view"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:k,onChange:n=>be(n.target.checked)})," ","Flatten nested object properties into separate columns"]}),e.jsx("h2",{children:"Parser"}),e.jsx("div",{className:"modal-text",children:"Select a JSON parser:"}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"parserId",value:"auto",checked:h===x.auto,onChange:()=>M(x.auto)})," ","Auto select"," ",e.jsx("div",{className:"explanation","data-tooltip-id":S,children:e.jsx(b,{icon:f})}),e.jsxs(g,{id:S,children:["Selects the Lossless JSON Parser for documents up to"," ",Q(H).replace(" "," "),", and selects the fast Native JSON Parser for larger documents."]})]})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"parserId",value:"native",checked:h===x.native,onChange:()=>M(x.native)})," ","Native JSON Parser"," ",e.jsx("div",{className:"explanation","data-tooltip-id":A,children:e.jsx(b,{icon:f})}),e.jsx(g,{id:A,children:"The Native JSON parser uses the browser's built-in JSON parser. This parser is very fast, but cannot handle long numbers."})]})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"parserId",value:"lossless",checked:h===x.lossless,onChange:()=>M(x.lossless)})," ","Lossless JSON Parser"," ",e.jsx("div",{className:"explanation","data-tooltip-id":U,children:e.jsx(b,{icon:f})}),e.jsxs(g,{id:U,children:["The Lossless JSON parser can handle long numbers and maintains the formatting of numbers. The parser is slower than the Native JSON parser, which is noticeable for documents larger than ",Q(H),"."]})]})}),h!==t.parserId&&e.jsxs("div",{className:"reload-warning",children:[e.jsx("div",{className:"reload-message",children:"The selected parser will be used after reloading the web application."}),e.jsx("div",{children:e.jsx("button",{className:"modal-button primary",onClick:ve,children:"Save config and reload now"})})]})]})}),e.jsxs("div",{className:"column right",children:[e.jsx("h2",{children:"Preview"}),e.jsx("div",{className:"preview-container",ref:z,children:e.jsx(ye,{mode:q,content:E,onChange:m,onChangeMode:D,flattenColumns:k,parser:T,indentation:V(d,l,t.indentation),tabSize:Me(l,t.tabSize),maxLineLength:Y,escapeControlCharacters:w,escapeUnicodeCharacters:I},h)})]})]}),e.jsxs("div",{className:"modal-action-menu",children:[e.jsx("button",{className:"modal-button",onClick:X,children:"Cancel"}),e.jsx("button",{className:"modal-button primary",onClick:O,children:"Ok"})]})]})})}function C(t){return Te(Number(t))}function Te(t){return!isNaN(t)&&isFinite(t)&&t>0&&Math.round(t)===t}function V(t,i,o){const a=Number(i);return t?"	":C(a)?a:o}function Me(t,i){const o=Number(t);return C(o)?o:i}function Oe(t,i){return ee(t)?t:i}function $(t,i,o){const a={fontSize:void 0,indentation:void 0,maxLineLength:void 0};ee(t.fontSize)||(a.fontSize='Error: invalid font size. Must be an integer number between 10 and 99 with an optional suffix "px" or "pt".');const j="Error: value must be a positive integer number";return C(i)||(a.indentation=j),C(o)||(a.maxLineLength=j),Object.keys(a).some(S=>a[S]!==void 0)?a:void 0}export{Qe as default};
